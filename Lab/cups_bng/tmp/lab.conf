#include "/vmm/bin/common.defs"
#include "/vmm/data/user_disks/vmxc/common.vmx.p3.defs"
#include "/vmm/data/user_disks/vptxc/common.evovptx.ardbeg.defs"
#include "/vmm/data/user_disks/vptxc/common.ardbeg.defs"
#undef GW_DISK
#define GW_DISK basedisk "/vmm/data/user_disks/irzan/images/gw.qcow2";
#undef UBUNTU_DISK
#define UBUNTU_DISK basedisk "/vmm/data/user_disks/irzan/images/ubuntu-18.04.qcow2";
#undef VMX_DISK0
#define VMX_DISK0  basedisk "/vmm/data/user_disks/irzan/images/vmx/junos-vmx-x86-64-22.1R1.10.vmdk";
#undef BRIDGE_DISK
#define BRIDGE_DISK basedisk "/vmm/data/user_disks/irzan/images/bridge.qcow2";
#undef DESKTOP_DISK
#define DESKTOP_DISK basedisk "/vmm/data/user_disks/irzan/images/desktop.qcow2";
#undef WRT_DISK
#define WRT_DISK basedisk "/vmm/data/user_disks/irzan/images/cpe.qcow2";
config "cups"{
  bridge "mgmt"{};
  bridge "net1"{};
  bridge "net2"{};
  bridge "mgmt4"{};
  bridge "acs1em7"{};
  bridge "ptp1"{};
  bridge "ptp3"{};
  bridge "acs1em8"{};
  bridge "ptp2"{};
  bridge "ptp4"{};
  bridge "acs1em5"{};
  bridge "acs1em6"{};
  bridge "ptp0"{};
  bridge "ptp5"{};
  bridge "acs1em1"{};
  bridge "acs1em2"{};
  bridge "acs1em3"{};
  bridge "acs1em4"{};
  bridge "cpe1c"{};
  bridge "cpe2c"{};
  bridge "cpe3c"{};
  bridge "cpe4c"{};
  bridge "reserved_bridge"{};
  PRIVATE_BRIDGES
vm "gw" {
   hostname "gw";
    GW_DISK
   setvar "+qemu_args" "-cpu qemu64,+vmx";
   ncpus 2;
   memory 4096;
   interface "em0" { bridge "external";};
   interface "em1" { bridge "mgmt";};
   interface "em2" { bridge "net1";};
   interface "em3" { bridge "net2";};
   interface "em4" { bridge "mgmt4";};
};
vm "deployer" {
   hostname "deployer";
    UBUNTU_DISK
   setvar "+qemu_args" "-cpu qemu64,+vmx";
   ncpus 2;
   memory 8192;
   setvar "enable_vnc" "1";
   interface "em0" { bridge "mgmt";};
   install "/vmm/data/user_disks/irzan/vm/cups/lab.conf" "/lab.conf";
};
vm "radius" {
   hostname "radius";
    UBUNTU_DISK
   setvar "+qemu_args" "-cpu qemu64,+vmx";
   ncpus 2;
   memory 8192;
   interface "em0" { bridge "mgmt";};
   install "/vmm/data/user_disks/irzan/vm/cups/lab.conf" "/lab.conf";
};
vm "node0" {
   hostname "node0";
    UBUNTU_DISK
   setvar "+qemu_args" "-cpu host,+vmx";
   ncpus 8;
   memory 32768;
   setvar "enable_vnc" "1";
   interface "em0" { bridge "mgmt";};
   install "/vmm/data/user_disks/irzan/vm/cups/lab.conf" "/lab.conf";
};
vm "node1" {
   hostname "node1";
    UBUNTU_DISK
   setvar "+qemu_args" "-cpu host,+vmx";
   ncpus 8;
   memory 32768;
   setvar "enable_vnc" "1";
   interface "em0" { bridge "mgmt";};
   install "/vmm/data/user_disks/irzan/vm/cups/lab.conf" "/lab.conf";
};
vm "node2" {
   hostname "node2";
    UBUNTU_DISK
   setvar "+qemu_args" "-cpu host,+vmx";
   ncpus 8;
   memory 32768;
   setvar "enable_vnc" "1";
   interface "em0" { bridge "mgmt";};
   install "/vmm/data/user_disks/irzan/vm/cups/lab.conf" "/lab.conf";
};
vm "nfs" {
   hostname "nfs";
    UBUNTU_DISK
   setvar "+qemu_args" "-cpu qemu64,+vmx";
   ncpus 2;
   memory 16384;
   setvar "enable_vnc" "1";
   interface "em0" { bridge "mgmt";};
   install "/vmm/data/user_disks/irzan/vm/cups/lab.conf" "/lab.conf";
};
   
   #undef EM_IPADDR
   #define EM_IPADDR interface "em0" { bridge "mgmt4";};
   #define VMX_CHASSIS_I2CID 48
   #define VMX_CHASSIS_NAME vbng1
   VMX_CHASSIS_START() 
      VMX_RE_START(vbng1_re,0)
         VMX_RE_INSTANCE(vbng1_re0, VMX_DISK0, VMX_RE_I2CID,0)
         install "/vmm/data/user_disks/irzan/vm/cups/vbng1.conf" "/root/junos.base.conf";
      VMX_RE_END
      VMX_MPC_START(vbng1_MP,0)
        VMX_MPC_INSTANCE(vbng1_MPC, VMX_DISK0, VMX_MPC_I2CID, 0)
            VMX_CONNECT(GE(0,0,0), net1)
            VMX_CONNECT(GE(0,0,1), ptp1)
            VMX_CONNECT(GE(0,0,2), ptp3)
            VMX_CONNECT(GE(0,0,3), acs1em7)
      VMX_MPC_END
   VMX_CHASSIS_END
   #undef VMX_CHASSIS_I2CID
   #undef VMX_CHASSIS_NAME
   
   #undef EM_IPADDR
   #define EM_IPADDR interface "em0" { bridge "mgmt4";};
   #define VMX_CHASSIS_I2CID 48
   #define VMX_CHASSIS_NAME vbng2
   VMX_CHASSIS_START() 
      VMX_RE_START(vbng2_re,0)
         VMX_RE_INSTANCE(vbng2_re0, VMX_DISK0, VMX_RE_I2CID,0)
         install "/vmm/data/user_disks/irzan/vm/cups/vbng2.conf" "/root/junos.base.conf";
      VMX_RE_END
      VMX_MPC_START(vbng2_MP,0)
        VMX_MPC_INSTANCE(vbng2_MPC, VMX_DISK0, VMX_MPC_I2CID, 0)
            VMX_CONNECT(GE(0,0,0), net1)
            VMX_CONNECT(GE(0,0,1), ptp2)
            VMX_CONNECT(GE(0,0,2), ptp4)
            VMX_CONNECT(GE(0,0,3), acs1em8)
      VMX_MPC_END
   VMX_CHASSIS_END
   #undef VMX_CHASSIS_I2CID
   #undef VMX_CHASSIS_NAME
   
   #undef EM_IPADDR
   #define EM_IPADDR interface "em0" { bridge "mgmt4";};
   #define VMX_CHASSIS_I2CID 48
   #define VMX_CHASSIS_NAME acs
   VMX_CHASSIS_START() 
      VMX_RE_START(acs_re,0)
         VMX_RE_INSTANCE(acs_re0, VMX_DISK0, VMX_RE_I2CID,0)
         install "/vmm/data/user_disks/irzan/vm/cups/acs.conf" "/root/junos.base.conf";
      VMX_RE_END
      VMX_MPC_START(acs_MP,0)
        VMX_MPC_INSTANCE(acs_MPC, VMX_DISK0, VMX_MPC_I2CID, 0)
            VMX_CONNECT(GE(0,0,0), acs1em5)
            VMX_CONNECT(GE(0,0,1), acs1em6)
            VMX_CONNECT(GE(0,0,2), ptp0)
      VMX_MPC_END
   VMX_CHASSIS_END
   #undef VMX_CHASSIS_I2CID
   #undef VMX_CHASSIS_NAME
   
   #undef EM_IPADDR
   #define EM_IPADDR interface "em0" { bridge "mgmt4";};
   #define VMX_CHASSIS_I2CID 48
   #define VMX_CHASSIS_NAME p1
   VMX_CHASSIS_START() 
      VMX_RE_START(p1_re,0)
         VMX_RE_INSTANCE(p1_re0, VMX_DISK0, VMX_RE_I2CID,0)
         install "/vmm/data/user_disks/irzan/vm/cups/p1.conf" "/root/junos.base.conf";
      VMX_RE_END
      VMX_MPC_START(p1_MP,0)
        VMX_MPC_INSTANCE(p1_MPC, VMX_DISK0, VMX_MPC_I2CID, 0)
            VMX_CONNECT(GE(0,0,0), ptp0)
            VMX_CONNECT(GE(0,0,1), ptp1)
            VMX_CONNECT(GE(0,0,2), ptp2)
      VMX_MPC_END
   VMX_CHASSIS_END
   #undef VMX_CHASSIS_I2CID
   #undef VMX_CHASSIS_NAME
   
   #undef EM_IPADDR
   #define EM_IPADDR interface "em0" { bridge "mgmt4";};
   #define VMX_CHASSIS_I2CID 48
   #define VMX_CHASSIS_NAME p2
   VMX_CHASSIS_START() 
      VMX_RE_START(p2_re,0)
         VMX_RE_INSTANCE(p2_re0, VMX_DISK0, VMX_RE_I2CID,0)
         install "/vmm/data/user_disks/irzan/vm/cups/p2.conf" "/root/junos.base.conf";
      VMX_RE_END
      VMX_MPC_START(p2_MP,0)
        VMX_MPC_INSTANCE(p2_MPC, VMX_DISK0, VMX_MPC_I2CID, 0)
            VMX_CONNECT(GE(0,0,0), ptp3)
            VMX_CONNECT(GE(0,0,1), ptp4)
            VMX_CONNECT(GE(0,0,3), ptp5)
      VMX_MPC_END
   VMX_CHASSIS_END
   #undef VMX_CHASSIS_I2CID
   #undef VMX_CHASSIS_NAME
   
   #undef EM_IPADDR
   #define EM_IPADDR interface "em0" { bridge "mgmt4";};
   #define VMX_CHASSIS_I2CID 48
   #define VMX_CHASSIS_NAME pe1
   VMX_CHASSIS_START() 
      VMX_RE_START(pe1_re,0)
         VMX_RE_INSTANCE(pe1_re0, VMX_DISK0, VMX_RE_I2CID,0)
         install "/vmm/data/user_disks/irzan/vm/cups/pe1.conf" "/root/junos.base.conf";
      VMX_RE_END
      VMX_MPC_START(pe1_MP,0)
        VMX_MPC_INSTANCE(pe1_MPC, VMX_DISK0, VMX_MPC_I2CID, 0)
            VMX_CONNECT(GE(0,0,0), net2)
            VMX_CONNECT(GE(0,0,1), ptp5)
      VMX_MPC_END
   VMX_CHASSIS_END
   #undef VMX_CHASSIS_I2CID
   #undef VMX_CHASSIS_NAME
vm "acs1" {
   hostname "acs1";
    BRIDGE_DISK
   setvar "+qemu_args" "-cpu qemu64,+vmx";
   ncpus 2;
   memory 2048;
   setvar "enable_vnc" "1";
   interface "em0" { bridge "mgmt";};
   interface "em1" { bridge "acs1em1";};
   interface "em2" { bridge "acs1em2";};
   interface "em3" { bridge "acs1em3";};
   interface "em4" { bridge "acs1em4";};
   interface "em5" { bridge "acs1em5";};
   interface "em6" { bridge "acs1em6";};
   interface "em7" { bridge "acs1em7";};
   interface "em8" { bridge "acs1em8";};
   install "/vmm/data/user_disks/irzan/vm/cups/lab.conf" "/lab.conf";
};
vm "client1" {
   hostname "client1";
    DESKTOP_DISK
   setvar "+qemu_args" "-cpu qemu64,+vmx";
   ncpus 2;
   memory 8192;
   setvar "enable_vnc" "1";
   interface "em0" { bridge "cpe1c";};
   install "/vmm/data/user_disks/irzan/vm/cups/lab.conf" "/lab.conf";
};
vm "client2" {
   hostname "client2";
    DESKTOP_DISK
   setvar "+qemu_args" "-cpu qemu64,+vmx";
   ncpus 2;
   memory 8192;
   setvar "enable_vnc" "1";
   interface "em0" { bridge "cpe2c";};
   install "/vmm/data/user_disks/irzan/vm/cups/lab.conf" "/lab.conf";
};
vm "client3" {
   hostname "client3";
    DESKTOP_DISK
   setvar "+qemu_args" "-cpu qemu64,+vmx";
   ncpus 2;
   memory 8192;
   setvar "enable_vnc" "1";
   interface "em0" { bridge "cpe3c";};
   install "/vmm/data/user_disks/irzan/vm/cups/lab.conf" "/lab.conf";
};
vm "client4" {
   hostname "client4";
    DESKTOP_DISK
   setvar "+qemu_args" "-cpu qemu64,+vmx";
   ncpus 2;
   memory 8192;
   setvar "enable_vnc" "1";
   interface "em0" { bridge "cpe4c";};
   install "/vmm/data/user_disks/irzan/vm/cups/lab.conf" "/lab.conf";
};
vm "cpe1" {
   hostname "cpe1";
    WRT_DISK
   setvar "+qemu_args" "-cpu qemu64,+vmx";
   ncpus 1;
   memory 256;
   interface "em0" { bridge "cpe1c";};
   interface "em1" { bridge "acs1em1";};
   install "/vmm/data/user_disks/irzan/vm/cups/lab.conf" "/lab.conf";
};
vm "cpe2" {
   hostname "cpe2";
    WRT_DISK
   setvar "+qemu_args" "-cpu qemu64,+vmx";
   ncpus 1;
   memory 256;
   interface "em0" { bridge "cpe2c";};
   interface "em1" { bridge "acs1em2";};
   install "/vmm/data/user_disks/irzan/vm/cups/lab.conf" "/lab.conf";
};
vm "cpe3" {
   hostname "cpe3";
    WRT_DISK
   setvar "+qemu_args" "-cpu qemu64,+vmx";
   ncpus 1;
   memory 256;
   interface "em0" { bridge "cpe3c";};
   interface "em1" { bridge "acs1em3";};
   install "/vmm/data/user_disks/irzan/vm/cups/lab.conf" "/lab.conf";
};
vm "cpe4" {
   hostname "cpe4";
    WRT_DISK
   setvar "+qemu_args" "-cpu qemu64,+vmx";
   ncpus 1;
   memory 256;
   interface "em0" { bridge "cpe4c";};
   interface "em1" { bridge "acs1em4";};
   install "/vmm/data/user_disks/irzan/vm/cups/lab.conf" "/lab.conf";
};
};
