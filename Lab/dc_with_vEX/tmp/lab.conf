#include "/vmm/bin/common.defs"
#include "/vmm/data/user_disks/vmxc/common.vmx.p3.defs"
#include "/vmm/data/user_disks/vptxc/common.evovptx.ardbeg.defs"
#include "/vmm/data/user_disks/vptxc/common.ardbeg.defs"
#undef GW_DISK
#define GW_DISK basedisk "/vmm/data/user_disks/irzan/images/gw.qcow2";
#undef VEXDISK
#define VEXDISK basedisk "/vmm/data/user_disks/irzan/images/vex/vJunos-ex-21.2R3-S1.7.qcow2";
#undef VMX_DISK0
#define VMX_DISK0  basedisk "/vmm/data/user_disks/irzan/images/vmx/junos-vmx-x86-64-22.2R1.9.vmdk";
#undef VSRXDISK
#define VSRXDISK basedisk "/vmm/data/user_disks/irzan/images/vsrx/junos-vsrx3-x86-64-22.1R1.10.vmdk";
#undef AOS_DISK
#define AOS_DISK basedisk "/vmm/data/user_disks/irzan/images/aos_server_4.1.1-287.qcow2";
#undef AOS_ZTP_DISK
#define AOS_ZTP_DISK basedisk "/vmm/data/user_disks/irzan/images/apstra-ztp-4.1.1-8.qcow2";
#undef UBUNTU_DISK
#define UBUNTU_DISK basedisk "/vmm/data/user_disks/irzan/images/ubuntu-20.04.qcow2";
config "dc1"{
  bridge "lan1"{};
  bridge "ext"{};
  bridge "ptp20"{};
  bridge "ptp23"{};
  bridge "ptp24"{};
  bridge "ptp0"{};
  bridge "ptp1"{};
  bridge "ptp2"{};
  bridge "ptp3"{};
  bridge "ptp4"{};
  bridge "ptp10"{};
  bridge "ptp12"{};
  bridge "ptp5"{};
  bridge "ptp6"{};
  bridge "ptp7"{};
  bridge "ptp8"{};
  bridge "ptp9"{};
  bridge "ptp11"{};
  bridge "ptp13"{};
  bridge "l1p2"{};
  bridge "l1p3"{};
  bridge "l1p4"{};
  bridge "l1p5"{};
  bridge "l1p6"{};
  bridge "l1p7"{};
  bridge "l2p2"{};
  bridge "l2p3"{};
  bridge "l2p4"{};
  bridge "l2p5"{};
  bridge "l2p6"{};
  bridge "l2p7"{};
  bridge "l3p2"{};
  bridge "l3p3"{};
  bridge "l3p4"{};
  bridge "l3p5"{};
  bridge "l3p6"{};
  bridge "l3p7"{};
  bridge "l4p2"{};
  bridge "l4p3"{};
  bridge "l4p4"{};
  bridge "l4p5"{};
  bridge "l4p6"{};
  bridge "l4p7"{};
  bridge "l5p5"{};
  bridge "l5p6"{};
  bridge "l5p7"{};
  bridge "ptp21"{};
  bridge "ptp22"{};
  bridge "sw1p3"{};
  bridge "sw1p4"{};
  bridge "sw1p5"{};
  bridge "sw1p6"{};
  bridge "sw1p7"{};
  bridge "ptp16"{};
  bridge "ptp18"{};
  bridge "ptp19"{};
  bridge "sw2p3"{};
  bridge "sw2p4"{};
  bridge "sw2p5"{};
  bridge "sw2p6"{};
  bridge "sw2p7"{};
  bridge "ptp17"{};
  bridge "ptp14"{};
  bridge "ptp15"{};
  bridge "vxp1"{};
  bridge "reserved_bridge"{};
  PRIVATE_BRIDGES
vm "gw" {
   hostname "gw";
    GW_DISK
   setvar "+qemu_args" "-cpu qemu64,+vmx";
   ncpus 2;
   memory 4096;
   interface "em0" { bridge "external";};
   interface "em1" { bridge "lan1";};
   interface "em2" { bridge "ext";};
   interface "em3" { bridge "ptp20";};
   interface "em4" { bridge "ptp23";};
   interface "em5" { bridge "ptp24";};
};
vm "spine1" {
   hostname "spine1";
      VEXDISK
      memory 16384;
      ncpus 4;
      setvar "+qemu_args" "-cpu host,+vmx";
         install "/vmm/data/user_disks/irzan/vm/dc1/spine1.conf" "/root/junos.base.conf";
      interface "vio0" { bridge "lan1"; };
      interface "vio1" { bridge "ptp0";};
      interface "vio2" { bridge "ptp1";};
      interface "vio3" { bridge "ptp2";};
      interface "vio4" { bridge "ptp3";};
      interface "vio5" { bridge "ptp4";};
      interface "vio6" { bridge "ptp10";};
      interface "vio7" { bridge "ptp12";};
};
vm "spine2" {
   hostname "spine2";
      VEXDISK
      memory 16384;
      ncpus 4;
      setvar "+qemu_args" "-cpu host,+vmx";
         install "/vmm/data/user_disks/irzan/vm/dc1/spine2.conf" "/root/junos.base.conf";
      interface "vio0" { bridge "lan1"; };
      interface "vio1" { bridge "ptp5";};
      interface "vio2" { bridge "ptp6";};
      interface "vio3" { bridge "ptp7";};
      interface "vio4" { bridge "ptp8";};
      interface "vio5" { bridge "ptp9";};
      interface "vio6" { bridge "ptp11";};
      interface "vio7" { bridge "ptp13";};
};
vm "leaf1" {
   hostname "leaf1";
      VEXDISK
      memory 16384;
      ncpus 4;
      setvar "+qemu_args" "-cpu host,+vmx";
         install "/vmm/data/user_disks/irzan/vm/dc1/leaf1.conf" "/root/junos.base.conf";
      interface "vio0" { bridge "lan1"; };
      interface "vio1" { bridge "ptp0";};
      interface "vio2" { bridge "ptp5";};
      interface "vio3" { bridge "l1p2";};
      interface "vio4" { bridge "l1p3";};
      interface "vio5" { bridge "l1p4";};
      interface "vio6" { bridge "l1p5";};
      interface "vio7" { bridge "l1p6";};
      interface "vio8" { bridge "l1p7";};
};
vm "leaf2" {
   hostname "leaf2";
      VEXDISK
      memory 16384;
      ncpus 4;
      setvar "+qemu_args" "-cpu host,+vmx";
         install "/vmm/data/user_disks/irzan/vm/dc1/leaf2.conf" "/root/junos.base.conf";
      interface "vio0" { bridge "lan1"; };
      interface "vio1" { bridge "ptp1";};
      interface "vio2" { bridge "ptp6";};
      interface "vio3" { bridge "l2p2";};
      interface "vio4" { bridge "l2p3";};
      interface "vio5" { bridge "l2p4";};
      interface "vio6" { bridge "l2p5";};
      interface "vio7" { bridge "l2p6";};
      interface "vio8" { bridge "l2p7";};
};
vm "leaf3" {
   hostname "leaf3";
      VEXDISK
      memory 16384;
      ncpus 4;
      setvar "+qemu_args" "-cpu host,+vmx";
         install "/vmm/data/user_disks/irzan/vm/dc1/leaf3.conf" "/root/junos.base.conf";
      interface "vio0" { bridge "lan1"; };
      interface "vio1" { bridge "ptp2";};
      interface "vio2" { bridge "ptp7";};
      interface "vio3" { bridge "l3p2";};
      interface "vio4" { bridge "l3p3";};
      interface "vio5" { bridge "l3p4";};
      interface "vio6" { bridge "l3p5";};
      interface "vio7" { bridge "l3p6";};
      interface "vio8" { bridge "l3p7";};
};
vm "leaf4" {
   hostname "leaf4";
      VEXDISK
      memory 16384;
      ncpus 4;
      setvar "+qemu_args" "-cpu host,+vmx";
         install "/vmm/data/user_disks/irzan/vm/dc1/leaf4.conf" "/root/junos.base.conf";
      interface "vio0" { bridge "lan1"; };
      interface "vio1" { bridge "ptp3";};
      interface "vio2" { bridge "ptp8";};
      interface "vio3" { bridge "l4p2";};
      interface "vio4" { bridge "l4p3";};
      interface "vio5" { bridge "l4p4";};
      interface "vio6" { bridge "l4p5";};
      interface "vio7" { bridge "l4p6";};
      interface "vio8" { bridge "l4p7";};
};
vm "leaf5" {
   hostname "leaf5";
      VEXDISK
      memory 16384;
      ncpus 4;
      setvar "+qemu_args" "-cpu host,+vmx";
         install "/vmm/data/user_disks/irzan/vm/dc1/leaf5.conf" "/root/junos.base.conf";
      interface "vio0" { bridge "lan1"; };
      interface "vio1" { bridge "ptp4";};
      interface "vio2" { bridge "ptp9";};
      interface "vio3" { bridge "ptp20";};
      interface "vio4" { bridge "ptp21";};
      interface "vio5" { bridge "ptp22";};
      interface "vio6" { bridge "l5p5";};
      interface "vio7" { bridge "l5p6";};
      interface "vio8" { bridge "l5p7";};
};
vm "sw1" {
   hostname "sw1";
      VEXDISK
      memory 16384;
      ncpus 4;
      setvar "+qemu_args" "-cpu host,+vmx";
         install "/vmm/data/user_disks/irzan/vm/dc1/sw1.conf" "/root/junos.base.conf";
      interface "vio0" { bridge "lan1"; };
      interface "vio1" { bridge "ptp18";};
      interface "vio2" { bridge "ptp19";};
      interface "vio3" { bridge "ptp16";};
      interface "vio4" { bridge "sw1p3";};
      interface "vio5" { bridge "sw1p4";};
      interface "vio6" { bridge "sw1p5";};
      interface "vio7" { bridge "sw1p6";};
      interface "vio8" { bridge "sw1p7";};
};
vm "sw2" {
   hostname "sw2";
      VEXDISK
      memory 16384;
      ncpus 4;
      setvar "+qemu_args" "-cpu host,+vmx";
         install "/vmm/data/user_disks/irzan/vm/dc1/sw2.conf" "/root/junos.base.conf";
      interface "vio0" { bridge "lan1"; };
      interface "vio1" { bridge "ptp18";};
      interface "vio2" { bridge "ptp19";};
      interface "vio3" { bridge "ptp17";};
      interface "vio4" { bridge "sw2p3";};
      interface "vio5" { bridge "sw2p4";};
      interface "vio6" { bridge "sw2p5";};
      interface "vio7" { bridge "sw2p6";};
      interface "vio8" { bridge "sw2p7";};
};
   
   #undef EM_IPADDR
   #define EM_IPADDR interface "em0" { bridge "lan1";};
   #define VMX_CHASSIS_I2CID 161
   #define VMX_CHASSIS_NAME pe1
   VMX_CHASSIS_START() 
      VMX_RE_START(pe1_re,0)
         VMX_RE_INSTANCE(pe1_re0, VMX_DISK0, VMX_RE_I2CID,0)
         install "/vmm/data/user_disks/irzan/vm/dc1/pe1.conf" "/root/junos.base.conf";
      VMX_RE_END
      VMX_MPC_START(pe1_MP,0)
        VMX_MPC_INSTANCE(pe1_MPC, VMX_DISK0, VMX_MPC_I2CID, 0)
            VMX_CONNECT(GE(0,0,0), ptp14)
            VMX_CONNECT(GE(0,0,1), ptp10)
            VMX_CONNECT(GE(0,0,2), ptp11)
      VMX_MPC_END
   VMX_CHASSIS_END
   #undef VMX_CHASSIS_I2CID
   #undef VMX_CHASSIS_NAME
   
   #undef EM_IPADDR
   #define EM_IPADDR interface "em0" { bridge "lan1";};
   #define VMX_CHASSIS_I2CID 161
   #define VMX_CHASSIS_NAME pe2
   VMX_CHASSIS_START() 
      VMX_RE_START(pe2_re,0)
         VMX_RE_INSTANCE(pe2_re0, VMX_DISK0, VMX_RE_I2CID,0)
         install "/vmm/data/user_disks/irzan/vm/dc1/pe2.conf" "/root/junos.base.conf";
      VMX_RE_END
      VMX_MPC_START(pe2_MP,0)
        VMX_MPC_INSTANCE(pe2_MPC, VMX_DISK0, VMX_MPC_I2CID, 0)
            VMX_CONNECT(GE(0,0,0), ptp15)
            VMX_CONNECT(GE(0,0,1), ptp16)
            VMX_CONNECT(GE(0,0,2), ptp17)
      VMX_MPC_END
   VMX_CHASSIS_END
   #undef VMX_CHASSIS_I2CID
   #undef VMX_CHASSIS_NAME
   
   #undef EM_IPADDR
   #define EM_IPADDR interface "em0" { bridge "lan1";};
   #define VMX_CHASSIS_I2CID 161
   #define VMX_CHASSIS_NAME p1
   VMX_CHASSIS_START() 
      VMX_RE_START(p1_re,0)
         VMX_RE_INSTANCE(p1_re0, VMX_DISK0, VMX_RE_I2CID,0)
         install "/vmm/data/user_disks/irzan/vm/dc1/p1.conf" "/root/junos.base.conf";
      VMX_RE_END
      VMX_MPC_START(p1_MP,0)
        VMX_MPC_INSTANCE(p1_MPC, VMX_DISK0, VMX_MPC_I2CID, 0)
            VMX_CONNECT(GE(0,0,0), ptp14)
            VMX_CONNECT(GE(0,0,1), ptp15)
      VMX_MPC_END
   VMX_CHASSIS_END
   #undef VMX_CHASSIS_I2CID
   #undef VMX_CHASSIS_NAME
   
   #undef EM_IPADDR
   #define EM_IPADDR interface "em0" { bridge "lan1";};
   #define VMX_CHASSIS_I2CID 161
   #define VMX_CHASSIS_NAME vxlangw
   VMX_CHASSIS_START() 
      VMX_RE_START(vxlangw_re,0)
         VMX_RE_INSTANCE(vxlangw_re0, VMX_DISK0, VMX_RE_I2CID,0)
         install "/vmm/data/user_disks/irzan/vm/dc1/vxlangw.conf" "/root/junos.base.conf";
      VMX_RE_END
      VMX_MPC_START(vxlangw_MP,0)
        VMX_MPC_INSTANCE(vxlangw_MPC, VMX_DISK0, VMX_MPC_I2CID, 0)
            VMX_CONNECT(GE(0,0,0), vxp1)
            VMX_CONNECT(GE(0,0,1), ptp24)
            VMX_CONNECT(GE(0,0,2), ptp12)
            VMX_CONNECT(GE(0,0,3), ptp13)
      VMX_MPC_END
   VMX_CHASSIS_END
   #undef VMX_CHASSIS_I2CID
   #undef VMX_CHASSIS_NAME
vm "fw1" {
   hostname "fw1";
      VSRXDISK
      memory 4096;
      ncpus 2;
      setvar "qemu_args" "-cpu qemu64,+vmx,+ssse3,+sse4_1,+sse4_2,+aes,+avx,+pat,+pclmulqdq,+rdtscp,+syscall,+tsc-deadline,+x2apic,+xsave";
         install "/vmm/data/user_disks/irzan/vm/dc1/fw1.conf" "/root/junos.base.conf";
      interface "vio0" { bridge "lan1"; };
      interface "vio1" { bridge "ptp23";};
      interface "vio2" { bridge "ptp21";};
      interface "vio3" { bridge "ptp22";};
};
vm "apstra" {
   hostname "apstra";
    AOS_DISK
   setvar "+qemu_args" "-cpu qemu64,+vmx";
   ncpus 4;
   memory 32768;
   setvar "enable_vnc" "1";
   interface "em0" { bridge "lan1";};
   install "/vmm/data/user_disks/irzan/vm/dc1/lab.conf" "/lab.conf";
};
vm "ztp" {
   hostname "ztp";
    AOS_ZTP_DISK
   setvar "+qemu_args" "-cpu qemu64,+vmx";
   ncpus 1;
   memory 4096;
   setvar "enable_vnc" "1";
   interface "em0" { bridge "lan1";};
   install "/vmm/data/user_disks/irzan/vm/dc1/lab.conf" "/lab.conf";
};
vm "svr1" {
   hostname "svr1";
    UBUNTU_DISK
   setvar "+qemu_args" "-cpu qemu64,+vmx";
   ncpus 2;
   memory 8192;
   setvar "enable_vnc" "1";
   interface "em0" { bridge "l1p2";};
   interface "em1" { bridge "l2p2";};
   interface "em2" { bridge "l1p4";};
   interface "em3" { bridge "l1p5";};
   install "/vmm/data/user_disks/irzan/vm/dc1/lab.conf" "/lab.conf";
};
vm "svr2" {
   hostname "svr2";
    UBUNTU_DISK
   setvar "+qemu_args" "-cpu qemu64,+vmx";
   ncpus 2;
   memory 8192;
   setvar "enable_vnc" "1";
   interface "em0" { bridge "l1p3";};
   interface "em1" { bridge "l2p3";};
   interface "em2" { bridge "l2p4";};
   interface "em3" { bridge "l2p5";};
   install "/vmm/data/user_disks/irzan/vm/dc1/lab.conf" "/lab.conf";
};
vm "svr3" {
   hostname "svr3";
    UBUNTU_DISK
   setvar "+qemu_args" "-cpu qemu64,+vmx";
   ncpus 2;
   memory 8192;
   setvar "enable_vnc" "1";
   interface "em0" { bridge "l3p2";};
   interface "em1" { bridge "l4p2";};
   interface "em2" { bridge "l3p4";};
   interface "em3" { bridge "l3p5";};
   install "/vmm/data/user_disks/irzan/vm/dc1/lab.conf" "/lab.conf";
};
vm "svr4" {
   hostname "svr4";
    UBUNTU_DISK
   setvar "+qemu_args" "-cpu qemu64,+vmx";
   ncpus 2;
   memory 8192;
   setvar "enable_vnc" "1";
   interface "em0" { bridge "l3p3";};
   interface "em1" { bridge "l4p3";};
   interface "em2" { bridge "l4p4";};
   interface "em3" { bridge "l4p5";};
   install "/vmm/data/user_disks/irzan/vm/dc1/lab.conf" "/lab.conf";
};
vm "svr5" {
   hostname "svr5";
    UBUNTU_DISK
   setvar "+qemu_args" "-cpu qemu64,+vmx";
   ncpus 2;
   memory 8192;
   setvar "enable_vnc" "1";
   interface "em0" { bridge "sw1p3";};
   interface "em1" { bridge "sw2p3";};
   interface "em2" { bridge "sw1p7";};
   install "/vmm/data/user_disks/irzan/vm/dc1/lab.conf" "/lab.conf";
};
vm "svr6" {
   hostname "svr6";
    UBUNTU_DISK
   setvar "+qemu_args" "-cpu qemu64,+vmx";
   ncpus 2;
   memory 8192;
   setvar "enable_vnc" "1";
   interface "em0" { bridge "sw1p4";};
   interface "em1" { bridge "sw2p4";};
   interface "em2" { bridge "sw2p7";};
   install "/vmm/data/user_disks/irzan/vm/dc1/lab.conf" "/lab.conf";
};
vm "svr7" {
   hostname "svr7";
    UBUNTU_DISK
   setvar "+qemu_args" "-cpu qemu64,+vmx";
   ncpus 2;
   memory 8192;
   setvar "enable_vnc" "1";
   interface "em0" { bridge "sw1p5";};
   interface "em1" { bridge "sw2p5";};
   install "/vmm/data/user_disks/irzan/vm/dc1/lab.conf" "/lab.conf";
};
vm "svr8" {
   hostname "svr8";
    UBUNTU_DISK
   setvar "+qemu_args" "-cpu qemu64,+vmx";
   ncpus 2;
   memory 8192;
   setvar "enable_vnc" "1";
   interface "em0" { bridge "sw1p6";};
   interface "em1" { bridge "sw2p6";};
   install "/vmm/data/user_disks/irzan/vm/dc1/lab.conf" "/lab.conf";
};
vm "svr9" {
   hostname "svr9";
    UBUNTU_DISK
   setvar "+qemu_args" "-cpu qemu64,+vmx";
   ncpus 1;
   memory 4096;
   setvar "enable_vnc" "1";
   interface "em0" { bridge "l5p5";};
   interface "em1" { bridge "l5p6";};
   interface "em2" { bridge "l5p7";};
   install "/vmm/data/user_disks/irzan/vm/dc1/lab.conf" "/lab.conf";
};
vm "svr10" {
   hostname "svr10";
    UBUNTU_DISK
   setvar "+qemu_args" "-cpu qemu64,+vmx";
   ncpus 2;
   memory 8192;
   setvar "enable_vnc" "1";
   interface "em0" { bridge "vxp1";};
   install "/vmm/data/user_disks/irzan/vm/dc1/lab.conf" "/lab.conf";
};
vm "lxc1" {
   hostname "lxc1";
    UBUNTU_DISK
   setvar "+qemu_args" "-cpu host,+vmx";
   ncpus 4;
   memory 16384;
   setvar "enable_vnc" "1";
   interface "em0" { bridge "l1p7";};
   interface "em1" { bridge "l1p6";};
   interface "em2" { bridge "l2p6";};
   install "/vmm/data/user_disks/irzan/vm/dc1/lab.conf" "/lab.conf";
};
vm "lxc2" {
   hostname "lxc2";
    UBUNTU_DISK
   setvar "+qemu_args" "-cpu host,+vmx";
   ncpus 4;
   memory 16384;
   setvar "enable_vnc" "1";
   interface "em0" { bridge "l2p7";};
   interface "em1" { bridge "l3p6";};
   interface "em2" { bridge "l4p6";};
   install "/vmm/data/user_disks/irzan/vm/dc1/lab.conf" "/lab.conf";
};
vm "svr11" {
   hostname "svr11";
    UBUNTU_DISK
   setvar "+qemu_args" "-cpu qemu64,+vmx";
   ncpus 2;
   memory 8192;
   setvar "enable_vnc" "1";
   interface "em0" { bridge "ext";};
   install "/vmm/data/user_disks/irzan/vm/dc1/lab.conf" "/lab.conf";
};
};
